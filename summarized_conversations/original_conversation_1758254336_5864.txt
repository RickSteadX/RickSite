{'role': 'assistant', 'content': 'Now let\'s update the Program.cs file to register our custom authentication state provider:\n\n<function_calls>\n<full-file-rewrite file_path="PersonalWebsite/PersonalWebsite.Client/Program.cs">\nusing Microsoft.AspNetCore.Components.Web;\nusing Microsoft.AspNetCore.Components.WebAssembly.Hosting;\nusing Microsoft.AspNetCore.Components.Authorization;\nusing PersonalWebsite.Client;\nusing PersonalWebsite.Client.Services;\nusing PersonalWebsite.Client.Auth;\n\nvar builder = WebAssemblyHostBuilder.CreateDefault(args);\nbuilder.RootComponents.Add<App>("#app");\nbuilder.RootComponents.Add<HeadOutlet>("head::after");\n\n// Configure HttpClient\nbuilder.Services.AddScoped(sp => new HttpClient { BaseAddress = new Uri(builder.HostEnvironment.BaseAddress) });\n\n// Register services\nbuilder.Services.AddScoped<AuthService>();\nbuilder.Services.AddScoped<PageService>();\nbuilder.Services.AddScoped<PageComponentService>();\n\n// Add authentication state provider\nbuilder.Services.AddAuthorizationCore();\nbuilder.Services.AddScoped<CustomAuthStateProvider>();\nbuilder.Services.AddScoped<AuthenticationStateProvider>(provider => \n    provider.GetRequiredService<CustomAuthStateProvider>());\n\nawait builder.Build().RunAsync();\n</full-file-rewrite>\n</function_calls>'}